CREATE TABLE news (
    id SERIAL PRIMARY KEY,

    title VARCHAR(150) NOT NULL,
    text TEXT NOT NULL CHECK (char_length(text) <= 2000),

    creationDate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    lastEditDate TIMESTAMP,

    insertedById INTEGER NOT NULL,
    updatedById INTEGER,

    CONSTRAINT fk_news_inserted_by FOREIGN KEY (insertedById) REFERENCES users(id),
    CONSTRAINT fk_news_updated_by FOREIGN KEY (updatedById) REFERENCES users(id)
);



CREATE TABLE comments (
    id SERIAL PRIMARY KEY,

    text VARCHAR(300) NOT NULL,

    creationDate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    lastEditDate TIMESTAMP,

    insertedById INTEGER NOT NULL,
    idNews INTEGER NOT NULL,

    CONSTRAINT fk_comment_inserted_by FOREIGN KEY (insertedById) REFERENCES users(id),
    CONSTRAINT fk_comment_news FOREIGN KEY (idNews) REFERENCES news(id)
);


CREATE TABLE app_user (
    id SERIAL PRIMARY KEY,

    username VARCHAR(40) NOT NULL UNIQUE,
    password VARCHAR(80) NOT NULL,

    name VARCHAR(20) NOT NULL,
    surname VARCHAR(20) NOT NULL,
    parentName VARCHAR(20),

    creationDate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    lastEditDate TIMESTAMP
);
